


          
å¥½çš„ï¼Œè€æ—ã€‚æˆ‘éœ€è¦å…ˆè¯»å–README.mdæ–‡ä»¶æ¥äº†è§£é¡¹ç›®è¦æ±‚ï¼Œç„¶åæ ¹æ®è¦æ±‚æ„å»ºé¡¹ç›®ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\EmpiricalCalculation\README.md
          
ç°åœ¨æˆ‘éœ€è¦æ ¹æ®README.mdä¸­çš„è¯¦ç»†è¦æ±‚æ¥æ„å»ºè¿™ä¸ªç»éªŒè®¡ç®—å™¨é¡¹ç›®ã€‚æˆ‘å°†ä½¿ç”¨React + TypeScript + ViteæŠ€æœ¯æ ˆæ¥åˆ›å»ºä¸€ä¸ªç°ä»£åŒ–çš„å‰ç«¯åº”ç”¨ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\package.json
          
content: {
  "name": "empirical-calculation",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview",
    "deploy:github": "npm run build && gh-pages -d dist",
    "deploy:vercel": "vercel --prod"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "antd": "^5.12.8",
    "@ant-design/icons": "^5.2.6",
    "date-fns": "^3.0.6",
    "date-fns-tz": "^2.0.0",
    "lucide-react": "^0.303.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.43",
    "@types/react-dom": "^18.2.17",
    "@typescript-eslint/eslint-plugin": "^6.14.0",
    "@typescript-eslint/parser": "^6.14.0",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.16",
    "eslint": "^8.55.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.5",
    "gh-pages": "^6.1.1",
    "postcss": "^8.4.32",
    "tailwindcss": "^3.3.6",
    "typescript": "^5.2.2",
    "vite": "^5.0.8"
  }
}
          
åˆ›å»ºViteé…ç½®æ–‡ä»¶ï¼Œé…ç½®Reactå’ŒTypeScriptæ”¯æŒã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\vite.config.ts
          
content: import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  base: './',
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          antd: ['antd'],
          utils: ['date-fns', 'date-fns-tz']
        }
      }
    }
  },
  server: {
    port: 3000,
    open: true
  }
})

          
åˆ›å»ºTypeScripté…ç½®æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\tsconfig.json
          
content: {
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    /* Path mapping */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}

          
åˆ›å»ºTypeScript Nodeé…ç½®æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\tsconfig.node.json
          
content: {
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}

          
åˆ›å»ºTailwind CSSé…ç½®æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\tailwind.config.js
          
content: /** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a',
        },
        dark: {
          50: '#f8fafc',
          100: '#f1f5f9',
          200: '#e2e8f0',
          300: '#cbd5e1',
          400: '#94a3b8',
          500: '#64748b',
          600: '#475569',
          700: '#334155',
          800: '#1e293b',
          900: '#0f172a',
        }
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
        'bounce-in': 'bounceIn 0.6s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { transform: 'translateY(20px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        },
        bounceIn: {
          '0%': { transform: 'scale(0.3)', opacity: '0' },
          '50%': { transform: 'scale(1.05)' },
          '70%': { transform: 'scale(0.9)' },
          '100%': { transform: 'scale(1)', opacity: '1' },
        },
      },
    },
  },
  plugins: [],
  darkMode: 'class',
}

          
åˆ›å»ºPostCSSé…ç½®æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\postcss.config.js
          
content: export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

          
åˆ›å»ºä¸»HTMLæ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\index.html
          
content: <!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="ç°ä»£åŒ–çš„æ¸¸æˆç»éªŒè®¡ç®—å™¨ï¼Œæ”¯æŒå…¨çƒæ—¶åŒºï¼Œç²¾ç¡®è®¡ç®—å‡çº§æ‰€éœ€æ—¶é—´" />
    <meta name="keywords" content="ç»éªŒè®¡ç®—å™¨,æ¸¸æˆ,å‡çº§,æ—¶åŒº,è®¡ç®—å™¨" />
    <title>ç»éªŒè®¡ç®—å™¨ - æ¸¸æˆå‡çº§æ—¶é—´è®¡ç®—å·¥å…·</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

          
åˆ›å»ºæ—¶åŒºæ•°æ®æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰ä¸»è¦æ—¶åŒºä¿¡æ¯ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\utils\timezoneData.ts
          
content: export interface TimezoneOption {
  value: string;
  label: string;
  group: string;
  utcOffset: string;
}

export const timezoneGroups = {
  asia: 'äºšæ´²æ—¶åŒº',
  europe: 'æ¬§æ´²æ—¶åŒº',
  northAmerica: 'åŒ—ç¾æ—¶åŒº',
  southAmerica: 'å—ç¾æ—¶åŒº',
  oceania: 'å¤§æ´‹æ´²æ—¶åŒº',
  africa: 'éæ´²æ—¶åŒº',
};

export const timezoneOptions: TimezoneOption[] = [
  // äºšæ´²æ—¶åŒº
  { value: 'Asia/Shanghai', label: 'ä¸­å›½æ ‡å‡†æ—¶é—´ (åŒ—äº¬)', group: 'asia', utcOffset: 'UTC+8' },
  { value: 'Asia/Tokyo', label: 'æ—¥æœ¬æ ‡å‡†æ—¶é—´ (ä¸œäº¬)', group: 'asia', utcOffset: 'UTC+9' },
  { value: 'Asia/Seoul', label: 'éŸ©å›½æ ‡å‡†æ—¶é—´ (é¦–å°”)', group: 'asia', utcOffset: 'UTC+9' },
  { value: 'Asia/Hong_Kong', label: 'é¦™æ¸¯æ—¶é—´', group: 'asia', utcOffset: 'UTC+8' },
  { value: 'Asia/Taipei', label: 'å°åŒ—æ—¶é—´', group: 'asia', utcOffset: 'UTC+8' },
  { value: 'Asia/Singapore', label: 'æ–°åŠ å¡æ—¶é—´', group: 'asia', utcOffset: 'UTC+8' },
  { value: 'Asia/Bangkok', label: 'æ³°å›½æ—¶é—´ (æ›¼è°·)', group: 'asia', utcOffset: 'UTC+7' },
  { value: 'Asia/Jakarta', label: 'å°å°¼è¥¿éƒ¨æ—¶é—´ (é›…åŠ è¾¾)', group: 'asia', utcOffset: 'UTC+7' },
  { value: 'Asia/Manila', label: 'è²å¾‹å®¾æ—¶é—´ (é©¬å°¼æ‹‰)', group: 'asia', utcOffset: 'UTC+8' },
  { value: 'Asia/Kuala_Lumpur', label: 'é©¬æ¥è¥¿äºšæ—¶é—´ (å‰éš†å¡)', group: 'asia', utcOffset: 'UTC+8' },
  { value: 'Asia/Ho_Chi_Minh', label: 'è¶Šå—æ—¶é—´ (èƒ¡å¿—æ˜å¸‚)', group: 'asia', utcOffset: 'UTC+7' },
  { value: 'Asia/Kolkata', label: 'å°åº¦æ ‡å‡†æ—¶é—´ (åŠ å°”å„ç­”)', group: 'asia', utcOffset: 'UTC+5:30' },
  { value: 'Asia/Karachi', label: 'å·´åŸºæ–¯å¦æ—¶é—´ (å¡æ‹‰å¥‡)', group: 'asia', utcOffset: 'UTC+5' },
  { value: 'Asia/Dubai', label: 'é˜¿è”é…‹æ—¶é—´ (è¿ªæ‹œ)', group: 'asia', utcOffset: 'UTC+4' },
  { value: 'Asia/Tehran', label: 'ä¼Šæœ—æ—¶é—´ (å¾·é»‘å…°)', group: 'asia', utcOffset: 'UTC+3:30' },
  { value: 'Asia/Riyadh', label: 'æ²™ç‰¹é˜¿æ‹‰ä¼¯æ—¶é—´ (åˆ©é›…å¾—)', group: 'asia', utcOffset: 'UTC+3' },
  { value: 'Asia/Jerusalem', label: 'ä»¥è‰²åˆ—æ—¶é—´ (è€¶è·¯æ’’å†·)', group: 'asia', utcOffset: 'UTC+2' },

  // æ¬§æ´²æ—¶åŒº
  { value: 'Europe/London', label: 'æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ (ä¼¦æ•¦)', group: 'europe', utcOffset: 'UTC+0/+1' },
  { value: 'Europe/Paris', label: 'ä¸­æ¬§æ—¶é—´ (å·´é»)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Berlin', label: 'ä¸­æ¬§æ—¶é—´ (æŸæ—)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Rome', label: 'ä¸­æ¬§æ—¶é—´ (ç½—é©¬)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Madrid', label: 'ä¸­æ¬§æ—¶é—´ (é©¬å¾·é‡Œ)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Amsterdam', label: 'ä¸­æ¬§æ—¶é—´ (é˜¿å§†æ–¯ç‰¹ä¸¹)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Brussels', label: 'ä¸­æ¬§æ—¶é—´ (å¸ƒé²å¡å°”)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Vienna', label: 'ä¸­æ¬§æ—¶é—´ (ç»´ä¹Ÿçº³)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Zurich', label: 'ä¸­æ¬§æ—¶é—´ (è‹é»ä¸–)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Stockholm', label: 'ä¸­æ¬§æ—¶é—´ (æ–¯å¾·å“¥å°”æ‘©)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Oslo', label: 'ä¸­æ¬§æ—¶é—´ (å¥¥æ–¯é™†)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Copenhagen', label: 'ä¸­æ¬§æ—¶é—´ (å“¥æœ¬å“ˆæ ¹)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Helsinki', label: 'ä¸œæ¬§æ—¶é—´ (èµ«å°”è¾›åŸº)', group: 'europe', utcOffset: 'UTC+2/+3' },
  { value: 'Europe/Warsaw', label: 'ä¸­æ¬§æ—¶é—´ (åæ²™)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Prague', label: 'ä¸­æ¬§æ—¶é—´ (å¸ƒæ‹‰æ ¼)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Budapest', label: 'ä¸­æ¬§æ—¶é—´ (å¸ƒè¾¾ä½©æ–¯)', group: 'europe', utcOffset: 'UTC+1/+2' },
  { value: 'Europe/Athens', label: 'ä¸œæ¬§æ—¶é—´ (é›…å…¸)', group: 'europe', utcOffset: 'UTC+2/+3' },
  { value: 'Europe/Istanbul', label: 'åœŸè€³å…¶æ—¶é—´ (ä¼Šæ–¯å¦å¸ƒå°”)', group: 'europe', utcOffset: 'UTC+3' },
  { value: 'Europe/Moscow', label: 'è«æ–¯ç§‘æ—¶é—´', group: 'europe', utcOffset: 'UTC+3' },

  // åŒ—ç¾æ—¶åŒº
  { value: 'America/New_York', label: 'ç¾å›½ä¸œéƒ¨æ—¶é—´ (çº½çº¦)', group: 'northAmerica', utcOffset: 'UTC-5/-4' },
  { value: 'America/Chicago', label: 'ç¾å›½ä¸­éƒ¨æ—¶é—´ (èŠåŠ å“¥)', group: 'northAmerica', utcOffset: 'UTC-6/-5' },
  { value: 'America/Denver', label: 'ç¾å›½å±±åœ°æ—¶é—´ (ä¸¹ä½›)', group: 'northAmerica', utcOffset: 'UTC-7/-6' },
  { value: 'America/Los_Angeles', label: 'ç¾å›½å¤ªå¹³æ´‹æ—¶é—´ (æ´›æ‰çŸ¶)', group: 'northAmerica', utcOffset: 'UTC-8/-7' },
  { value: 'America/Anchorage', label: 'é˜¿æ‹‰æ–¯åŠ æ—¶é—´ (å®‰å…‹é›·å¥‡)', group: 'northAmerica', utcOffset: 'UTC-9/-8' },
  { value: 'Pacific/Honolulu', label: 'å¤å¨å¤·æ—¶é—´ (æª€é¦™å±±)', group: 'northAmerica', utcOffset: 'UTC-10' },
  { value: 'America/Toronto', label: 'åŠ æ‹¿å¤§ä¸œéƒ¨æ—¶é—´ (å¤šä¼¦å¤š)', group: 'northAmerica', utcOffset: 'UTC-5/-4' },
  { value: 'America/Vancouver', label: 'åŠ æ‹¿å¤§å¤ªå¹³æ´‹æ—¶é—´ (æ¸©å“¥å)', group: 'northAmerica', utcOffset: 'UTC-8/-7' },
  { value: 'America/Montreal', label: 'åŠ æ‹¿å¤§ä¸œéƒ¨æ—¶é—´ (è’™ç‰¹åˆ©å°”)', group: 'northAmerica', utcOffset: 'UTC-5/-4' },
  { value: 'America/Mexico_City', label: 'å¢¨è¥¿å“¥ä¸­éƒ¨æ—¶é—´ (å¢¨è¥¿å“¥åŸ)', group: 'northAmerica', utcOffset: 'UTC-6/-5' },

  // å—ç¾æ—¶åŒº
  { value: 'America/Sao_Paulo', label: 'å·´è¥¿æ—¶é—´ (åœ£ä¿ç½—)', group: 'southAmerica', utcOffset: 'UTC-3/-2' },
  { value: 'America/Argentina/Buenos_Aires', label: 'é˜¿æ ¹å»·æ—¶é—´ (å¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯)', group: 'southAmerica', utcOffset: 'UTC-3' },
  { value: 'America/Santiago', label: 'æ™ºåˆ©æ—¶é—´ (åœ£åœ°äºšå“¥)', group: 'southAmerica', utcOffset: 'UTC-4/-3' },
  { value: 'America/Lima', label: 'ç§˜é²æ—¶é—´ (åˆ©é©¬)', group: 'southAmerica', utcOffset: 'UTC-5' },
  { value: 'America/Bogota', label: 'å“¥ä¼¦æ¯”äºšæ—¶é—´ (æ³¢å“¥å¤§)', group: 'southAmerica', utcOffset: 'UTC-5' },
  { value: 'America/Caracas', label: 'å§”å†…ç‘æ‹‰æ—¶é—´ (åŠ æ‹‰åŠ æ–¯)', group: 'southAmerica', utcOffset: 'UTC-4' },

  // å¤§æ´‹æ´²æ—¶åŒº
  { value: 'Australia/Sydney', label: 'æ¾³å¤§åˆ©äºšä¸œéƒ¨æ—¶é—´ (æ‚‰å°¼)', group: 'oceania', utcOffset: 'UTC+10/+11' },
  { value: 'Australia/Melbourne', label: 'æ¾³å¤§åˆ©äºšä¸œéƒ¨æ—¶é—´ (å¢¨å°”æœ¬)', group: 'oceania', utcOffset: 'UTC+10/+11' },
  { value: 'Australia/Brisbane', label: 'æ¾³å¤§åˆ©äºšä¸œéƒ¨æ ‡å‡†æ—¶é—´ (å¸ƒé‡Œæ–¯ç­)', group: 'oceania', utcOffset: 'UTC+10' },
  { value: 'Australia/Perth', label: 'æ¾³å¤§åˆ©äºšè¥¿éƒ¨æ—¶é—´ (ç€æ–¯)', group: 'oceania', utcOffset: 'UTC+8' },
  { value: 'Australia/Adelaide', label: 'æ¾³å¤§åˆ©äºšä¸­éƒ¨æ—¶é—´ (é˜¿å¾·è±å¾·)', group: 'oceania', utcOffset: 'UTC+9:30/+10:30' },
  { value: 'Pacific/Auckland', label: 'æ–°è¥¿å…°æ—¶é—´ (å¥¥å…‹å…°)', group: 'oceania', utcOffset: 'UTC+12/+13' },
  { value: 'Pacific/Fiji', label: 'æ–æµæ—¶é—´', group: 'oceania', utcOffset: 'UTC+12/+13' },

  // éæ´²æ—¶åŒº
  { value: 'Africa/Cairo', label: 'åŸƒåŠæ—¶é—´ (å¼€ç½—)', group: 'africa', utcOffset: 'UTC+2' },
  { value: 'Africa/Johannesburg', label: 'å—éæ—¶é—´ (çº¦ç¿°å†…æ–¯å ¡)', group: 'africa', utcOffset: 'UTC+2' },
  { value: 'Africa/Lagos', label: 'è¥¿éæ—¶é—´ (æ‹‰å„æ–¯)', group: 'africa', utcOffset: 'UTC+1' },
  { value: 'Africa/Nairobi', label: 'ä¸œéæ—¶é—´ (å†…ç½—æ¯•)', group: 'africa', utcOffset: 'UTC+3' },
  { value: 'Africa/Casablanca', label: 'æ‘©æ´›å“¥æ—¶é—´ (å¡è¨å¸ƒå…°å¡)', group: 'africa', utcOffset: 'UTC+0/+1' },
];

export const getTimezonesByGroup = () => {
  const grouped: Record<string, TimezoneOption[]> = {};
  
  timezoneOptions.forEach(timezone => {
    if (!grouped[timezone.group]) {
      grouped[timezone.group] = [];
    }
    grouped[timezone.group].push(timezone);
  });
  
  return grouped;
};

export const findTimezoneByValue = (value: string): TimezoneOption | undefined => {
  return timezoneOptions.find(tz => tz.value === value);
};

          
åˆ›å»ºæ—¶é—´è®¡ç®—æ ¸å¿ƒé€»è¾‘æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\utils\timeCalculation.ts
          
content: import { format } from 'date-fns';
import { zonedTimeToUtc, utcToZonedTime } from 'date-fns-tz';

export interface CalculationResult {
  completionTime: string;
  remainingExp: number;
  hoursNeeded: number;
  daysNeeded: number;
  hoursRemainder: number;
  minutesRemainder: number;
  timezone: string;
  error?: string;
}

export interface CalculationInput {
  requiredExp: number;
  currentExp: number;
  expPerHour: number;
  selectedTimezone: string;
}

/**
 * è®¡ç®—å‡çº§æ‰€éœ€æ—¶é—´
 * @param input è®¡ç®—è¾“å…¥å‚æ•°
 * @returns è®¡ç®—ç»“æœ
 */
export function calculateUpgradeTime(input: CalculationInput): CalculationResult {
  const { requiredExp, currentExp, expPerHour, selectedTimezone } = input;
  
  // 1. è®¡ç®—å‰©ä½™ç»éªŒå€¼
  const remainingExp = requiredExp - currentExp;
  
  // 2. éªŒè¯è¾“å…¥
  if (remainingExp <= 0) {
    return {
      completionTime: '',
      remainingExp: 0,
      hoursNeeded: 0,
      daysNeeded: 0,
      hoursRemainder: 0,
      minutesRemainder: 0,
      timezone: selectedTimezone,
      error: 'å½“å‰ç»éªŒå·²è¾¾åˆ°æˆ–è¶…è¿‡å‡çº§æ‰€éœ€ç»éªŒ'
    };
  }
  
  if (expPerHour <= 0) {
    return {
      completionTime: '',
      remainingExp,
      hoursNeeded: 0,
      daysNeeded: 0,
      hoursRemainder: 0,
      minutesRemainder: 0,
      timezone: selectedTimezone,
      error: 'æ¯å°æ—¶è·å–ç»éªŒå€¼å¿…é¡»å¤§äº0'
    };
  }
  
  // 3. è®¡ç®—æ‰€éœ€å°æ—¶æ•°
  const hoursNeeded = remainingExp / expPerHour;
  
  // 4. è®¡ç®—æ‰€éœ€æ¯«ç§’æ•°
  const millisecondsNeeded = hoursNeeded * 60 * 60 * 1000;
  
  // 5. è·å–å½“å‰æ—¶é—´ï¼ˆæœ¬åœ°æ—¶é—´ï¼‰
  const now = new Date();
  
  // 6. è®¡ç®—å‡çº§å®Œæˆçš„æ—¶é—´ç‚¹ï¼ˆæœ¬åœ°æ—¶é—´ï¼‰
  const completionTimeLocal = new Date(now.getTime() + millisecondsNeeded);
  
  // 7. è½¬æ¢åˆ°ç”¨æˆ·é€‰æ‹©çš„æ—¶åŒº
  const completionTimeInUserTimezone = convertToTimezone(completionTimeLocal, selectedTimezone);
  
  // 8. è®¡ç®—æ—¶é—´åˆ†è§£
  const daysNeeded = Math.floor(hoursNeeded / 24);
  const hoursRemainder = Math.floor(hoursNeeded % 24);
  const minutesRemainder = Math.floor((hoursNeeded % 1) * 60);
  
  return {
    completionTime: completionTimeInUserTimezone,
    remainingExp,
    hoursNeeded,
    daysNeeded,
    hoursRemainder,
    minutesRemainder,
    timezone: selectedTimezone
  };
}

/**
 * è½¬æ¢æ—¶é—´åˆ°æŒ‡å®šæ—¶åŒº
 * @param date è¦è½¬æ¢çš„æ—¥æœŸ
 * @param timezone ç›®æ ‡æ—¶åŒº
 * @returns æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²
 */
export function convertToTimezone(date: Date, timezone: string): string {
  try {
    // å°†æ—¥æœŸè½¬æ¢åˆ°æŒ‡å®šæ—¶åŒº
    const zonedDate = utcToZonedTime(date, timezone);
    
    // æ ¼å¼åŒ–ä¸º YYYY-MM-DD HH:mm æ ¼å¼
    return format(zonedDate, 'yyyy-MM-dd HH:mm');
  } catch (error) {
    console.error('æ—¶åŒºè½¬æ¢é”™è¯¯:', error);
    // å¦‚æœæ—¶åŒºè½¬æ¢å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ—¶é—´
    return format(date, 'yyyy-MM-dd HH:mm');
  }
}

/**
 * æ ¼å¼åŒ–æ•°å­—ï¼Œæ·»åŠ åƒåˆ†ä½åˆ†éš”ç¬¦
 * @param num è¦æ ¼å¼åŒ–çš„æ•°å­—
 * @returns æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²
 */
export function formatNumber(num: number): string {
  return new Intl.NumberFormat('zh-CN').format(num);
}

/**
 * è§£æå¸¦åƒåˆ†ä½åˆ†éš”ç¬¦çš„æ•°å­—å­—ç¬¦ä¸²
 * @param str è¦è§£æçš„å­—ç¬¦ä¸²
 * @returns è§£æåçš„æ•°å­—
 */
export function parseFormattedNumber(str: string): number {
  // ç§»é™¤æ‰€æœ‰éæ•°å­—å’Œå°æ•°ç‚¹çš„å­—ç¬¦
  const cleanStr = str.replace(/[^\d.]/g, '');
  const num = parseFloat(cleanStr);
  return isNaN(num) ? 0 : num;
}

/**
 * éªŒè¯è¾“å…¥å€¼
 * @param value è¾“å…¥å€¼
 * @param fieldName å­—æ®µåç§°
 * @returns éªŒè¯ç»“æœ
 */
export function validateInput(value: number, fieldName: string): string | null {
  if (isNaN(value) || value < 0) {
    return `${fieldName}å¿…é¡»æ˜¯éè´Ÿæ•°`;
  }
  
  if (fieldName === 'æ¯å°æ—¶è·å–ç»éªŒå€¼' && value === 0) {
    return 'æ¯å°æ—¶è·å–ç»éªŒå€¼ä¸èƒ½ä¸º0';
  }
  
  return null;
}

/**
 * æ ¼å¼åŒ–æ—¶é•¿æ˜¾ç¤º
 * @param days å¤©æ•°
 * @param hours å°æ—¶æ•°
 * @param minutes åˆ†é’Ÿæ•°
 * @returns æ ¼å¼åŒ–çš„æ—¶é•¿å­—ç¬¦ä¸²
 */
export function formatDuration(days: number, hours: number, minutes: number): string {
  const parts: string[] = [];
  
  if (days > 0) {
    parts.push(`${days}å¤©`);
  }
  
  if (hours > 0) {
    parts.push(`${hours}å°æ—¶`);
  }
  
  if (minutes > 0) {
    parts.push(`${minutes}åˆ†é’Ÿ`);
  }
  
  if (parts.length === 0) {
    return 'ä¸åˆ°1åˆ†é’Ÿ';
  }
  
  return parts.join('');
}

/**
 * è·å–å½“å‰æ—¶åŒºçš„æ˜¾ç¤ºåç§°
 * @param timezone æ—¶åŒºæ ‡è¯†ç¬¦
 * @returns æ—¶åŒºæ˜¾ç¤ºåç§°
 */
export function getTimezoneDisplayName(timezone: string): string {
  try {
    const now = new Date();
    const formatter = new Intl.DateTimeFormat('zh-CN', {
      timeZone: timezone,
      timeZoneName: 'long'
    });
    
    const parts = formatter.formatToParts(now);
    const timeZonePart = parts.find(part => part.type === 'timeZoneName');
    
    return timeZonePart?.value || timezone;
  } catch (error) {
    return timezone;
  }
}

          
åˆ›å»ºæ ¼å¼åŒ–å·¥å…·å‡½æ•°æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\utils\formatting.ts
          
content: /**
 * æ ¼å¼åŒ–å·¥å…·å‡½æ•°é›†åˆ
 */

/**
 * æ ¼å¼åŒ–æ•°å­—ï¼Œæ·»åŠ åƒåˆ†ä½åˆ†éš”ç¬¦
 * @param value æ•°å­—å€¼
 * @param decimals å°æ•°ä½æ•°ï¼Œé»˜è®¤ä¸º0
 * @returns æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²
 */
export function formatNumber(value: number, decimals: number = 0): string {
  if (isNaN(value)) return '0';
  
  return new Intl.NumberFormat('zh-CN', {
    minimumFractionDigits: decimals,
    maximumFractionDigits: decimals
  }).format(value);
}

/**
 * è§£ææ ¼å¼åŒ–çš„æ•°å­—å­—ç¬¦ä¸²
 * @param str æ ¼å¼åŒ–çš„æ•°å­—å­—ç¬¦ä¸²
 * @returns è§£æåçš„æ•°å­—
 */
export function parseNumber(str: string): number {
  if (!str || typeof str !== 'string') return 0;
  
  // ç§»é™¤åƒåˆ†ä½åˆ†éš”ç¬¦å’Œå…¶ä»–éæ•°å­—å­—ç¬¦ï¼ˆä¿ç•™å°æ•°ç‚¹å’Œè´Ÿå·ï¼‰
  const cleanStr = str.replace(/[^\d.-]/g, '');
  const num = parseFloat(cleanStr);
  
  return isNaN(num) ? 0 : num;
}

/**
 * æ ¼å¼åŒ–ç»éªŒå€¼æ˜¾ç¤º
 * @param exp ç»éªŒå€¼
 * @returns æ ¼å¼åŒ–çš„ç»éªŒå€¼å­—ç¬¦ä¸²
 */
export function formatExperience(exp: number): string {
  if (exp >= 1000000000) {
    return `${formatNumber(exp / 1000000000, 2)}B`;
  } else if (exp >= 1000000) {
    return `${formatNumber(exp / 1000000, 2)}M`;
  } else if (exp >= 1000) {
    return `${formatNumber(exp / 1000, 1)}K`;
  }
  return formatNumber(exp);
}

/**
 * æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
 * @param date æ—¥æœŸå¯¹è±¡æˆ–æ—¶é—´å­—ç¬¦ä¸²
 * @returns æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²
 */
export function formatDateTime(date: Date | string): string {
  const dateObj = typeof date === 'string' ? new Date(date) : date;
  
  if (isNaN(dateObj.getTime())) {
    return 'æ— æ•ˆæ—¶é—´';
  }
  
  return new Intl.DateTimeFormat('zh-CN', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit',
    hour12: false
  }).format(dateObj);
}

/**
 * æ ¼å¼åŒ–æŒç»­æ—¶é—´
 * @param totalHours æ€»å°æ—¶æ•°
 * @returns æ ¼å¼åŒ–çš„æŒç»­æ—¶é—´å­—ç¬¦ä¸²
 */
export function formatDuration(totalHours: number): string {
  if (totalHours < 0) return '0åˆ†é’Ÿ';
  
  const days = Math.floor(totalHours / 24);
  const hours = Math.floor(totalHours % 24);
  const minutes = Math.floor((totalHours % 1) * 60);
  
  const parts: string[] = [];
  
  if (days > 0) {
    parts.push(`${days}å¤©`);
  }
  
  if (hours > 0) {
    parts.push(`${hours}å°æ—¶`);
  }
  
  if (minutes > 0 || parts.length === 0) {
    parts.push(`${minutes}åˆ†é’Ÿ`);
  }
  
  return parts.join('');
}

/**
 * æ ¼å¼åŒ–ç™¾åˆ†æ¯”
 * @param value æ•°å€¼ï¼ˆ0-1ä¹‹é—´ï¼‰
 * @param decimals å°æ•°ä½æ•°
 * @returns æ ¼å¼åŒ–çš„ç™¾åˆ†æ¯”å­—ç¬¦ä¸²
 */
export function formatPercentage(value: number, decimals: number = 1): string {
  return `${formatNumber(value * 100, decimals)}%`;
}

/**
 * éªŒè¯å¹¶æ ¼å¼åŒ–è¾“å…¥å€¼
 * @param value è¾“å…¥å€¼
 * @param type è¾“å…¥ç±»å‹
 * @returns éªŒè¯ç»“æœå’Œæ ¼å¼åŒ–å€¼
 */
export function validateAndFormat(value: string, type: 'integer' | 'decimal' = 'integer'): {
  isValid: boolean;
  value: number;
  formatted: string;
  error?: string;
} {
  const numValue = parseNumber(value);
  
  if (isNaN(numValue)) {
    return {
      isValid: false,
      value: 0,
      formatted: '0',
      error: 'è¯·è¾“å…¥æœ‰æ•ˆæ•°å­—'
    };
  }
  
  if (numValue < 0) {
    return {
      isValid: false,
      value: 0,
      formatted: '0',
      error: 'æ•°å€¼ä¸èƒ½ä¸ºè´Ÿæ•°'
    };
  }
  
  const decimals = type === 'decimal' ? 2 : 0;
  
  return {
    isValid: true,
    value: numValue,
    formatted: formatNumber(numValue, decimals)
  };
}

/**
 * å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
 * @param text è¦å¤åˆ¶çš„æ–‡æœ¬
 * @returns æ˜¯å¦å¤åˆ¶æˆåŠŸ
 */
export async function copyToClipboard(text: string): Promise<boolean> {
  try {
    if (navigator.clipboard && window.isSecureContext) {
      await navigator.clipboard.writeText(text);
      return true;
    } else {
      // é™çº§æ–¹æ¡ˆ
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      
      const result = document.execCommand('copy');
      document.body.removeChild(textArea);
      return result;
    }
  } catch (error) {
    console.error('å¤åˆ¶åˆ°å‰ªè´´æ¿å¤±è´¥:', error);
    return false;
  }
}

/**
 * é˜²æŠ–å‡½æ•°
 * @param func è¦é˜²æŠ–çš„å‡½æ•°
 * @param wait ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
 * @returns é˜²æŠ–åçš„å‡½æ•°
 */
export function debounce<T extends (...args: any[]) => any>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout;
  
  return (...args: Parameters<T>) => {
    clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
}

/**
 * èŠ‚æµå‡½æ•°
 * @param func è¦èŠ‚æµçš„å‡½æ•°
 * @param limit æ—¶é—´é™åˆ¶ï¼ˆæ¯«ç§’ï¼‰
 * @returns èŠ‚æµåçš„å‡½æ•°
 */
export function throttle<T extends (...args: any[]) => any>(
  func: T,
  limit: number
): (...args: Parameters<T>) => void {
  let inThrottle: boolean;
  
  return (...args: Parameters<T>) => {
    if (!inThrottle) {
      func(...args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}

          
åˆ›å»ºæ—¶åŒºé€‰æ‹©å™¨ç»„ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\components\TimeZoneSelector.tsx
          
content: import React from 'react';
import { Select } from 'antd';
import { GlobalOutlined } from '@ant-design/icons';
import { timezoneOptions, timezoneGroups, getTimezonesByGroup, type TimezoneOption } from '../utils/timezoneData';

interface TimeZoneSelectorProps {
  value: string;
  onChange: (value: string) => void;
  className?: string;
}

const TimeZoneSelector: React.FC<TimeZoneSelectorProps> = ({
  value,
  onChange,
  className = ''
}) => {
  const groupedTimezones = getTimezonesByGroup();

  const renderOption = (timezone: TimezoneOption) => ({
    label: (
      <div className="flex justify-between items-center">
        <span className="text-gray-900 dark:text-gray-100">{timezone.label}</span>
        <span className="text-xs text-gray-500 dark:text-gray-400 ml-2">
          {timezone.utcOffset}
        </span>
      </div>
    ),
    value: timezone.value,
    key: timezone.value
  });

  const options = Object.entries(groupedTimezones).map(([groupKey, timezones]) => ({
    label: (
      <div className="font-medium text-primary-600 dark:text-primary-400 py-1">
        {timezoneGroups[groupKey as keyof typeof timezoneGroups]}
      </div>
    ),
    options: timezones.map(renderOption)
  }));

  const selectedTimezone = timezoneOptions.find(tz => tz.value === value);

  return (
    <div className={`w-full ${className}`}>
      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
        <GlobalOutlined className="mr-2" />
        æ—¶åŒºé€‰æ‹©
      </label>
      <Select
        value={value}
        onChange={onChange}
        options={options}
        showSearch
        placeholder="è¯·é€‰æ‹©æ—¶åŒº"
        className="w-full"
        size="large"
        filterOption={(input, option) => {
          if (!option || !option.value) return false;
          const timezone = timezoneOptions.find(tz => tz.value === option.value);
          if (!timezone) return false;
          
          const searchText = input.toLowerCase();
          return (
            timezone.label.toLowerCase().includes(searchText) ||
            timezone.value.toLowerCase().includes(searchText) ||
            timezone.utcOffset.toLowerCase().includes(searchText)
          );
        }}
        dropdownStyle={{
          maxHeight: 400,
          overflow: 'auto'
        }}
        dropdownRender={(menu) => (
          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700">
            {menu}
          </div>
        )}
      />
      {selectedTimezone && (
        <div className="mt-2 text-xs text-gray-500 dark:text-gray-400">
          å½“å‰é€‰æ‹©: {selectedTimezone.label} ({selectedTimezone.utcOffset})
        </div>
      )}
    </div>
  );
};

export default TimeZoneSelector;

          
åˆ›å»ºç»“æœæ˜¾ç¤ºç»„ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\components\ResultDisplay.tsx
          
content: import React, { useState } from 'react';
import { Card, Button, message, Tooltip } from 'antd';
import {
  ClockCircleOutlined,
  CalendarOutlined,
  TrophyOutlined,
  GlobalOutlined,
  CopyOutlined,
  CheckOutlined
} from '@ant-design/icons';
import { CalculationResult } from '../utils/timeCalculation';
import { formatNumber, formatDuration, copyToClipboard } from '../utils/formatting';
import { findTimezoneByValue } from '../utils/timezoneData';

interface ResultDisplayProps {
  result: CalculationResult | null;
  loading?: boolean;
}

const ResultDisplay: React.FC<ResultDisplayProps> = ({ result, loading = false }) => {
  const [copied, setCopied] = useState(false);

  if (!result || result.error) {
    if (result?.error) {
      return (
        <Card className="mt-6 border-red-200 dark:border-red-800">
          <div className="text-center py-8">
            <div className="text-red-500 text-lg mb-2">âš ï¸ è®¡ç®—é”™è¯¯</div>
            <div className="text-red-600 dark:text-red-400">{result.error}</div>
          </div>
        </Card>
      );
    }
    return null;
  }

  const timezone = findTimezoneByValue(result.timezone);
  const durationText = formatDuration(result.hoursNeeded);

  const handleCopy = async () => {
    const copyText = `å‡çº§å®Œæˆæ—¶é—´: ${result.completionTime}\n` +
                    `æ‰€éœ€æ—¶é•¿: ${durationText}\n` +
                    `å‰©ä½™ç»éªŒ: ${formatNumber(result.remainingExp)}\n` +
                    `æ—¶åŒº: ${timezone?.label || result.timezone}`;
    
    const success = await copyToClipboard(copyText);
    if (success) {
      setCopied(true);
      message.success('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
      setTimeout(() => setCopied(false), 2000);
    } else {
      message.error('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
    }
  };

  return (
    <div className="mt-6 animate-slide-up">
      <Card 
        className="border-primary-200 dark:border-primary-800 shadow-lg"
        loading={loading}
      >
        <div className="text-center mb-6">
          <div className="text-2xl font-bold text-primary-600 dark:text-primary-400 mb-2">
            ğŸ¯ å‡çº§è®¡ç®—ç»“æœ
          </div>
          <div className="text-gray-600 dark:text-gray-400">
            æ ¹æ®æ‚¨çš„è¾“å…¥è®¡ç®—å¾—å‡ºä»¥ä¸‹ç»“æœ
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* å®Œæˆæ—¶é—´ */}
          <div className="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-lg">
            <div className="flex items-center mb-2">
              <ClockCircleOutlined className="text-blue-500 text-lg mr-2" />
              <span className="font-medium text-gray-700 dark:text-gray-300">å‡çº§å®Œæˆæ—¶é—´</span>
            </div>
            <div className="text-xl font-bold text-blue-600 dark:text-blue-400">
              {result.completionTime}
            </div>
            <div className="text-sm text-gray-500 dark:text-gray-400 mt-1">
              {timezone?.label || result.timezone}
            </div>
          </div>

          {/* æ‰€éœ€æ—¶é•¿ */}
          <div className="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg">
            <div className="flex items-center mb-2">
              <CalendarOutlined className="text-green-500 text-lg mr-2" />
              <span className="font-medium text-gray-700 dark:text-gray-300">æ‰€éœ€æ—¶é•¿</span>
            </div>
            <div className="text-xl font-bold text-green-600 dark:text-green-400">
              {durationText}
            </div>
            <div className="text-sm text-gray-500 dark:text-gray-400 mt-1">
              çº¦ {formatNumber(result.hoursNeeded, 1)} å°æ—¶
            </div>
          </div>

          {/* å‰©ä½™ç»éªŒ */}
          <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-lg">
            <div className="flex items-center mb-2">
              <TrophyOutlined className="text-purple-500 text-lg mr-2" />
              <span className="font-medium text-gray-700 dark:text-gray-300">å‰©ä½™ç»éªŒå€¼</span>
            </div>
            <div className="text-xl font-bold text-purple-600 dark:text-purple-400">
              {formatNumber(result.remainingExp)}
            </div>
            <div className="text-sm text-gray-500 dark:text-gray-400 mt-1">
              éœ€è¦è·å–çš„ç»éªŒå€¼
            </div>
          </div>

          {/* æ—¶åŒºä¿¡æ¯ */}
          <div className="bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-4 rounded-lg">
            <div className="flex items-center mb-2">
              <GlobalOutlined className="text-orange-500 text-lg mr-2" />
              <span className="font-medium text-gray-700 dark:text-gray-300">æ—¶åŒºä¿¡æ¯</span>
            </div>
            <div className="text-lg font-bold text-orange-600 dark:text-orange-400">
              {timezone?.utcOffset || 'UTC+0'}
            </div>
            <div className="text-sm text-gray-500 dark:text-gray-400 mt-1">
              {timezone?.label || result.timezone}
            </div>
          </div>
        </div>

        {/* è¯¦ç»†æ—¶é—´åˆ†è§£ */}
        <div className="mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <div className="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
            ğŸ“Š æ—¶é—´è¯¦ç»†åˆ†è§£
          </div>
          <div className="grid grid-cols-3 gap-4 text-center">
            <div>
              <div className="text-2xl font-bold text-blue-600 dark:text-blue-400">
                {result.daysNeeded}
              </div>
              <div className="text-xs text-gray-500 dark:text-gray-400">å¤©</div>
            </div>
            <div>
              <div className="text-2xl font-bold text-green-600 dark:text-green-400">
                {result.hoursRemainder}
              </div>
              <div className="text-xs text-gray-500 dark:text-gray-400">å°æ—¶</div>
            </div>
            <div>
              <div className="text-2xl font-bold text-purple-600 dark:text-purple-400">
                {result.minutesRemainder}
              </div>
              <div className="text-xs text-gray-500 dark:text-gray-400">åˆ†é’Ÿ</div>
            </div>
          </div>
        </div>

        {/* å¤åˆ¶æŒ‰é’® */}
        <div className="mt-6 text-center">
          <Tooltip title="å¤åˆ¶ç»“æœåˆ°å‰ªè´´æ¿">
            <Button
              type="primary"
              icon={copied ? <CheckOutlined /> : <CopyOutlined />}
              onClick={handleCopy}
              className={`${copied ? 'bg-green-500 border-green-500' : ''} transition-all duration-300`}
              size="large"
            >
              {copied ? 'å·²å¤åˆ¶' : 'å¤åˆ¶ç»“æœ'}
            </Button>
          </Tooltip>
        </div>
      </Card>
    </div>
  );
};

export default ResultDisplay;

          
åˆ›å»ºä¸»é¢˜åˆ‡æ¢ç»„ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\components\ThemeToggle.tsx
          
content: import React from 'react';
import { Button, Tooltip } from 'antd';
import { SunOutlined, MoonOutlined } from '@ant-design/icons';

interface ThemeToggleProps {
  isDark: boolean;
  onToggle: () => void;
  className?: string;
}

const ThemeToggle: React.FC<ThemeToggleProps> = ({ isDark, onToggle, className = '' }) => {
  return (
    <Tooltip title={isDark ? 'åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼' : 'åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼'}>
      <Button
        type="text"
        icon={isDark ? <SunOutlined /> : <MoonOutlined />}
        onClick={onToggle}
        className={`${className} transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-700`}
        size="large"
      />
    </Tooltip>
  );
};

export default ThemeToggle;

          
åˆ›å»ºä¸»è®¡ç®—å™¨ç»„ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\components\Calculator.tsx
          
content: import React, { useState, useEffect, useCallback } from 'react';
import { Card, Input, Button, Form, message, Space } from 'antd';
import {
  CalculatorOutlined,
  TrophyOutlined,
  RiseOutlined,
  ThunderboltOutlined,
  ReloadOutlined
} from '@ant-design/icons';
import TimeZoneSelector from './TimeZoneSelector';
import ResultDisplay from './ResultDisplay';
import { calculateUpgradeTime, type CalculationInput, type CalculationResult } from '../utils/timeCalculation';
import { formatNumber, parseNumber, validateAndFormat, debounce } from '../utils/formatting';

interface FormData {
  requiredExp: string;
  currentExp: string;
  expPerHour: string;
  timezone: string;
}

const Calculator: React.FC = () => {
  const [form] = Form.useForm();
  const [formData, setFormData] = useState<FormData>({
    requiredExp: '',
    currentExp: '',
    expPerHour: '',
    timezone: 'Asia/Shanghai'
  });
  const [result, setResult] = useState<CalculationResult | null>(null);
  const [loading, setLoading] = useState(false);
  const [errors, setErrors] = useState<Record<string, string>>({});

  // ä»localStorageåŠ è½½ä¿å­˜çš„æ•°æ®
  useEffect(() => {
    const savedData = localStorage.getItem('calculatorData');
    if (savedData) {
      try {
        const parsed = JSON.parse(savedData);
        setFormData(parsed);
        form.setFieldsValue(parsed);
      } catch (error) {
        console.error('åŠ è½½ä¿å­˜çš„æ•°æ®å¤±è´¥:', error);
      }
    }
  }, [form]);

  // ä¿å­˜æ•°æ®åˆ°localStorage
  const saveToLocalStorage = useCallback(
    debounce((data: FormData) => {
      localStorage.setItem('calculatorData', JSON.stringify(data));
    }, 1000),
    []
  );

  // éªŒè¯å•ä¸ªå­—æ®µ
  const validateField = (name: string, value: string): string | null => {
    const validation = validateAndFormat(value, name === 'expPerHour' ? 'decimal' : 'integer');
    
    if (!validation.isValid) {
      return validation.error || 'è¾“å…¥æ— æ•ˆ';
    }

    // é¢å¤–éªŒè¯
    if (name === 'expPerHour' && validation.value === 0) {
      return 'æ¯å°æ—¶è·å–ç»éªŒå€¼ä¸èƒ½ä¸º0';
    }

    if (name === 'currentExp' && name === 'requiredExp') {
      const currentExpValue = parseNumber(formData.currentExp);
      const requiredExpValue = parseNumber(formData.requiredExp);
      if (currentExpValue >= requiredExpValue) {
        return 'å½“å‰ç»éªŒä¸èƒ½å¤§äºæˆ–ç­‰äºå‡çº§æ‰€éœ€ç»éªŒ';
      }
    }

    return null;
  };

  // å¤„ç†è¾“å…¥å˜åŒ–
  const handleInputChange = (name: keyof FormData, value: string) => {
    const newFormData = { ...formData, [name]: value };
    setFormData(newFormData);
    saveToLocalStorage(newFormData);

    // éªŒè¯å½“å‰å­—æ®µ
    const error = validateField(name, value);
    setErrors(prev => ({
      ...prev,
      [name]: error || ''
    }));

    // å¦‚æœæ˜¯ç»éªŒå€¼å­—æ®µï¼Œéœ€è¦äº¤å‰éªŒè¯
    if (name === 'currentExp' || name === 'requiredExp') {
      const currentExpValue = parseNumber(name === 'currentExp' ? value : formData.currentExp);
      const requiredExpValue = parseNumber(name === 'requiredExp' ? value : formData.requiredExp);
      
      if (currentExpValue > 0 && requiredExpValue > 0 && currentExpValue >= requiredExpValue) {
        setErrors(prev => ({
          ...prev,
          currentExp: 'å½“å‰ç»éªŒä¸èƒ½å¤§äºæˆ–ç­‰äºå‡çº§æ‰€éœ€ç»éªŒ'
        }));
      } else {
        setErrors(prev => ({
          ...prev,
          currentExp: prev.currentExp === 'å½“å‰ç»éªŒä¸èƒ½å¤§äºæˆ–ç­‰äºå‡çº§æ‰€éœ€ç»éªŒ' ? '' : prev.currentExp
        }));
      }
    }
  };

  // æ ¼å¼åŒ–è¾“å…¥æ¡†æ˜¾ç¤º
  const formatInputValue = (value: string, type: 'integer' | 'decimal' = 'integer') => {
    if (!value) return '';
    const numValue = parseNumber(value);
    if (isNaN(numValue)) return value;
    return formatNumber(numValue, type === 'decimal' ? 2 : 0);
  };

  // æ‰§è¡Œè®¡ç®—
  const handleCalculate = async () => {
    // éªŒè¯æ‰€æœ‰å­—æ®µ
    const newErrors: Record<string, string> = {};
    
    Object.entries(formData).forEach(([key, value]) => {
      if (key !== 'timezone') {
        const error = validateField(key, value);
        if (error) {
          newErrors[key] = error;
        }
      }
    });

    // æ£€æŸ¥å¿…å¡«å­—æ®µ
    if (!formData.requiredExp) newErrors.requiredExp = 'è¯·è¾“å…¥å‡çº§æ‰€éœ€ç»éªŒå€¼';
    if (!formData.currentExp) newErrors.currentExp = 'è¯·è¾“å…¥ç°æœ‰ç»éªŒå€¼';
    if (!formData.expPerHour) newErrors.expPerHour = 'è¯·è¾“å…¥æ¯å°æ—¶è·å–ç»éªŒå€¼';

    setErrors(newErrors);

    if (Object.values(newErrors).some(error => error)) {
      message.error('è¯·æ£€æŸ¥è¾“å…¥æ•°æ®');
      return;
    }

    setLoading(true);
    
    try {
      // æ¨¡æ‹Ÿè®¡ç®—å»¶è¿Ÿï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
      await new Promise(resolve => setTimeout(resolve, 500));
      
      const input: CalculationInput = {
        requiredExp: parseNumber(formData.requiredExp),
        currentExp: parseNumber(formData.currentExp),
        expPerHour: parseNumber(formData.expPerHour),
        selectedTimezone: formData.timezone
      };

      const calculationResult = calculateUpgradeTime(input);
      setResult(calculationResult);

      if (calculationResult.error) {
        message.error(calculationResult.error);
      } else {
        message.success('è®¡ç®—å®Œæˆï¼');
      }
    } catch (error) {
      console.error('è®¡ç®—é”™è¯¯:', error);
      message.error('è®¡ç®—è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œè¯·é‡è¯•');
    } finally {
      setLoading(false);
    }
  };

  // é‡ç½®è¡¨å•
  const handleReset = () => {
    const resetData: FormData = {
      requiredExp: '',
      currentExp: '',
      expPerHour: '',
      timezone: 'Asia/Shanghai'
    };
    
    setFormData(resetData);
    setResult(null);
    setErrors({});
    form.setFieldsValue(resetData);
    localStorage.removeItem('calculatorData');
    message.success('è¡¨å•å·²é‡ç½®');
  };

  return (
    <div className="max-w-4xl mx-auto">
      <Card className="shadow-lg border-0">
        <div className="text-center mb-8">
          <div className="text-3xl font-bold text-gray-800 dark:text-gray-200 mb-2">
            ğŸ® ç»éªŒè®¡ç®—å™¨
          </div>
          <div className="text-gray-600 dark:text-gray-400">
            ç²¾ç¡®è®¡ç®—æ¸¸æˆå‡çº§æ‰€éœ€æ—¶é—´ï¼Œæ”¯æŒå…¨çƒæ—¶åŒº
          </div>
        </div>

        <Form form={form} layout="vertical" className="space-y-6">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {/* å‡çº§æ‰€éœ€ç»éªŒå€¼ */}
            <Form.Item
              label={
                <span className="flex items-center text-gray-700 dark:text-gray-300">
                  <TrophyOutlined className="mr-2 text-yellow-500" />
                  å‡çº§æ‰€éœ€ç»éªŒå€¼
                </span>
              }
              validateStatus={errors.requiredExp ? 'error' : ''}
              help={errors.requiredExp}
            >
              <Input
                size="large"
                placeholder="è¯·è¾“å…¥å‡çº§æ‰€éœ€çš„æ€»ç»éªŒå€¼"
                value={formData.requiredExp}
                onChange={(e) => handleInputChange('requiredExp', e.target.value)}
                onBlur={(e) => {
                  const formatted = formatInputValue(e.target.value);
                  handleInputChange('requiredExp', formatted);
                }}
                prefix={<TrophyOutlined className="text-gray-400" />}
              />
            </Form.Item>

            {/* ç°æœ‰ç»éªŒå€¼ */}
            <Form.Item
              label={
                <span className="flex items-center text-gray-700 dark:text-gray-300">
                  <RiseOutlined className="mr-2 text-blue-500" />
                  ç°æœ‰ç»éªŒå€¼
                </span>
              }
              validateStatus={errors.currentExp ? 'error' : ''}
              help={errors.currentExp}
            >
              <Input
                size="large"
                placeholder="è¯·è¾“å…¥å½“å‰å·²æœ‰çš„ç»éªŒå€¼"
                value={formData.currentExp}
                onChange={(e) => handleInputChange('currentExp', e.target.value)}
                onBlur={(e) => {
                  const formatted = formatInputValue(e.target.value);
                  handleInputChange('currentExp', formatted);
                }}
                prefix={<RiseOutlined className="text-gray-400" />}
              />
            </Form.Item>

            {/* æ¯å°æ—¶è·å–ç»éªŒå€¼ */}
            <Form.Item
              label={
                <span className="flex items-center text-gray-700 dark:text-gray-300">
                  <ThunderboltOutlined className="mr-2 text-green-500" />
                  æ¯å°æ—¶è·å–ç»éªŒå€¼
                </span>
              }
              validateStatus={errors.expPerHour ? 'error' : ''}
              help={errors.expPerHour}
            >
              <Input
                size="large"
                placeholder="è¯·è¾“å…¥æ¯å°æ—¶èƒ½è·å–çš„ç»éªŒå€¼"
                value={formData.expPerHour}
                onChange={(e) => handleInputChange('expPerHour', e.target.value)}
                onBlur={(e) => {
                  const formatted = formatInputValue(e.target.value, 'decimal');
                  handleInputChange('expPerHour', formatted);
                }}
                prefix={<ThunderboltOutlined className="text-gray-400" />}
              />
            </Form.Item>

            {/* æ—¶åŒºé€‰æ‹© */}
            <Form.Item>
              <TimeZoneSelector
                value={formData.timezone}
                onChange={(value) => handleInputChange('timezone', value)}
              />
            </Form.Item>
          </div>

          {/* æ“ä½œæŒ‰é’® */}
          <div className="flex justify-center space-x-4 pt-6">
            <Button
              type="primary"
              size="large"
              icon={<CalculatorOutlined />}
              onClick={handleCalculate}
              loading={loading}
              className="px-8 h-12 text-lg font-medium"
            >
              å¼€å§‹è®¡ç®—
            </Button>
            
            <Button
              size="large"
              icon={<ReloadOutlined />}
              onClick={handleReset}
              className="px-8 h-12"
            >
              é‡ç½®
            </Button>
          </div>
        </Form>
      </Card>

      {/* ç»“æœæ˜¾ç¤º */}
      <ResultDisplay result={result} loading={loading} />
    </div>
  );
};

export default Calculator;

          
åˆ›å»ºä¸»åº”ç”¨ç»„ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\App.tsx
          
content: import React, { useState, useEffect } from 'react';
import { ConfigProvider, theme } from 'antd';
import zhCN from 'antd/locale/zh_CN';
import Calculator from './components/Calculator';
import ThemeToggle from './components/ThemeToggle';
import './styles/globals.css';

function App() {
  const [isDarkMode, setIsDarkMode] = useState(false);

  // ä»localStorageåŠ è½½ä¸»é¢˜è®¾ç½®
  useEffect(() => {
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    const shouldUseDark = savedTheme === 'dark' || (!savedTheme && prefersDark);
    setIsDarkMode(shouldUseDark);
    
    // åº”ç”¨ä¸»é¢˜åˆ°document
    if (shouldUseDark) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }, []);

  // åˆ‡æ¢ä¸»é¢˜
  const toggleTheme = () => {
    const newTheme = !isDarkMode;
    setIsDarkMode(newTheme);
    
    // ä¿å­˜åˆ°localStorage
    localStorage.setItem('theme', newTheme ? 'dark' : 'light');
    
    // åº”ç”¨åˆ°document
    if (newTheme) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  };

  return (
    <ConfigProvider
      locale={zhCN}
      theme={{
        algorithm: isDarkMode ? theme.darkAlgorithm : theme.defaultAlgorithm,
        token: {
          colorPrimary: '#3b82f6',
          borderRadius: 8,
          fontSize: 14,
        },
        components: {
          Card: {
            borderRadiusLG: 12,
          },
          Button: {
            borderRadius: 8,
          },
          Input: {
            borderRadius: 8,
          },
          Select: {
            borderRadius: 8,
          },
        },
      }}
    >
      <div className={`min-h-screen transition-colors duration-300 ${
        isDarkMode 
          ? 'bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' 
          : 'bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50'
      }`}>
        {/* å¤´éƒ¨ */}
        <header className="relative z-10">
          <div className="container mx-auto px-4 py-6">
            <div className="flex justify-between items-center">
              <div className="flex items-center space-x-3">
                <div className="text-2xl">ğŸ®</div>
                <div>
                  <h1 className="text-2xl font-bold text-gray-800 dark:text-gray-200">
                    ç»éªŒè®¡ç®—å™¨
                  </h1>
                  <p className="text-sm text-gray-600 dark:text-gray-400">
                    ç²¾ç¡®è®¡ç®—æ¸¸æˆå‡çº§æ—¶é—´
                  </p>
                </div>
              </div>
              
              <ThemeToggle 
                isDark={isDarkMode} 
                onToggle={toggleTheme}
                className="z-10"
              />
            </div>
          </div>
        </header>

        {/* ä¸»è¦å†…å®¹ */}
        <main className="container mx-auto px-4 pb-12">
          <Calculator />
        </main>

        {/* é¡µè„š */}
        <footer className="mt-12 py-8 border-t border-gray-200 dark:border-gray-700">
          <div className="container mx-auto px-4 text-center">
            <div className="text-gray-600 dark:text-gray-400 mb-4">
              <p className="mb-2">
                ğŸš€ ç°ä»£åŒ–çš„æ¸¸æˆç»éªŒè®¡ç®—å™¨ï¼Œæ”¯æŒå…¨çƒæ—¶åŒºç²¾ç¡®è®¡ç®—
              </p>
              <p className="text-sm">
                æ”¯æŒå¤§æ•°å€¼ç»éªŒè®¡ç®— â€¢ å®æ—¶æ—¶åŒºè½¬æ¢ â€¢ å“åº”å¼è®¾è®¡
              </p>
            </div>
            
            <div className="flex justify-center items-center space-x-6 text-sm text-gray-500 dark:text-gray-400">
              <span className="flex items-center">
                <span className="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                åœ¨çº¿æœåŠ¡
              </span>
              <span>â€¢</span>
              <span>æ”¯æŒ {new Date().getFullYear()} å¹´æœ€æ–°æ—¶åŒºæ•°æ®</span>
              <span>â€¢</span>
              <span>ç²¾ç¡®åˆ°åˆ†é’Ÿçº§åˆ«</span>
            </div>
            
            <div className="mt-4 text-xs text-gray-400 dark:text-gray-500">
              <p>Â© {new Date().getFullYear()} ç»éªŒè®¡ç®—å™¨. ä½¿ç”¨ React + TypeScript + Vite æ„å»º</p>
            </div>
          </div>
        </footer>

        {/* èƒŒæ™¯è£…é¥° */}
        <div className="fixed inset-0 pointer-events-none overflow-hidden">
          <div className={`absolute -top-40 -right-40 w-80 h-80 rounded-full opacity-20 ${
            isDarkMode ? 'bg-blue-500' : 'bg-blue-300'
          } blur-3xl animate-pulse`}></div>
          <div className={`absolute -bottom-40 -left-40 w-80 h-80 rounded-full opacity-20 ${
            isDarkMode ? 'bg-purple-500' : 'bg-purple-300'
          } blur-3xl animate-pulse`} style={{ animationDelay: '2s' }}></div>
          <div className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full opacity-10 ${
            isDarkMode ? 'bg-indigo-500' : 'bg-indigo-300'
          } blur-3xl animate-pulse`} style={{ animationDelay: '4s' }}></div>
        </div>
      </div>
    </ConfigProvider>
  );
}

export default App;

          
åˆ›å»ºå…¨å±€æ ·å¼æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\styles\globals.css
          
content: @tailwind base;
@tailwind components;
@tailwind utilities;

/* è‡ªå®šä¹‰CSSå˜é‡ */
:root {
  --primary-color: #3b82f6;
  --primary-hover: #2563eb;
  --success-color: #10b981;
  --warning-color: #f59e0b;
  --error-color: #ef4444;
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --bg-primary: #ffffff;
  --bg-secondary: #f9fafb;
  --border-color: #e5e7eb;
}

.dark {
  --text-primary: #f9fafb;
  --text-secondary: #d1d5db;
  --bg-primary: #1f2937;
  --bg-secondary: #111827;
  --border-color: #374151;
}

/* åŸºç¡€æ ·å¼é‡ç½® */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.6;
  color: var(--text-primary);
  background-color: var(--bg-primary);
  transition: color 0.3s ease, background-color 0.3s ease;
}

/* æ»šåŠ¨æ¡æ ·å¼ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-track {
  background: #374151;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

.dark ::-webkit-scrollbar-thumb {
  background: #6b7280;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* è‡ªå®šä¹‰åŠ¨ç”» */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* å·¥å…·ç±» */
.animate-fade-in {
  animation: fadeIn 0.5s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-bounce-in {
  animation: bounceIn 0.6s ease-out;
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-spin {
  animation: spin 1s linear infinite;
}

/* æ¸å˜èƒŒæ™¯ */
.gradient-bg {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.gradient-bg-light {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.gradient-bg-dark {
  background: linear-gradient(135deg, #4c1d95 0%, #1e1b4b 100%);
}

/* å¡ç‰‡é˜´å½±æ•ˆæœ */
.card-shadow {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transition: box-shadow 0.3s ease;
}

.card-shadow:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.dark .card-shadow {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
}

.dark .card-shadow:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
}

/* æ–‡æœ¬é€‰æ‹©æ ·å¼ */
::selection {
  background-color: #3b82f6;
  color: white;
}

.dark ::selection {
  background-color: #60a5fa;
  color: #1f2937;
}

/* ç„¦ç‚¹æ ·å¼ */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
}

.dark .focus-ring {
  @apply dark:focus:ring-offset-gray-800;
}

/* æŒ‰é’®æ ·å¼å¢å¼º */
.btn-primary {
  @apply bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus-ring;
}

.btn-secondary {
  @apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus-ring;
}

.dark .btn-secondary {
  @apply dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200;
}

/* è¾“å…¥æ¡†æ ·å¼å¢å¼º */
.input-enhanced {
  @apply border border-gray-300 rounded-lg px-3 py-2 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors duration-200;
}

.dark .input-enhanced {
  @apply dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200;
}

/* å“åº”å¼å®¹å™¨ */
.container {
  @apply mx-auto px-4 sm:px-6 lg:px-8;
}

/* ç½‘æ ¼å¸ƒå±€å¢å¼º */
.grid-responsive {
  @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4;
}

/* æ–‡æœ¬æˆªæ–­ */
.text-truncate {
  @apply truncate;
}

.text-truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.text-truncate-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* åŠ è½½çŠ¶æ€ */
.loading-skeleton {
  @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded;
}

/* é”™è¯¯çŠ¶æ€ */
.error-text {
  @apply text-red-600 dark:text-red-400 text-sm;
}

/* æˆåŠŸçŠ¶æ€ */
.success-text {
  @apply text-green-600 dark:text-green-400 text-sm;
}

/* è­¦å‘ŠçŠ¶æ€ */
.warning-text {
  @apply text-yellow-600 dark:text-yellow-400 text-sm;
}

/* ä¿¡æ¯çŠ¶æ€ */
.info-text {
  @apply text-blue-600 dark:text-blue-400 text-sm;
}

/* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒæ»šåŠ¨åŠŸèƒ½ */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* æ‰“å°æ ·å¼ */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    background: white !important;
    color: black !important;
  }
  
  .card-shadow {
    box-shadow: none !important;
    border: 1px solid #e5e7eb !important;
  }
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼æ”¯æŒ */
@media (prefers-contrast: high) {
  .btn-primary {
    @apply border-2 border-black;
  }
  
  .input-enhanced {
    @apply border-2 border-black;
  }
}

/* å‡å°‘åŠ¨ç”»æ¨¡å¼æ”¯æŒ */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

          
åˆ›å»ºä¸»å…¥å£æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\src\main.tsx
          
content: import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './styles/globals.css'

// è®¾ç½®æ—¥æœŸåº“çš„è¯­è¨€
import 'dayjs/locale/zh-cn'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

          
åˆ›å»ºéƒ¨ç½²é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒGitHub Pageséƒ¨ç½²ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\.github\workflows\deploy.yml
          
content: name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build
      run: npm run build
      
    - name: Deploy to GitHub Pages
      if: github.ref == 'refs/heads/main'
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
        cname: # å¦‚æœæœ‰è‡ªå®šä¹‰åŸŸåï¼Œåœ¨è¿™é‡Œè®¾ç½®

          
åˆ›å»ºVerceléƒ¨ç½²é…ç½®æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\vercel.json
          
content: {
  "version": 2,
  "name": "empirical-calculation",
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "installCommand": "npm install",
  "framework": "vite"
}

          
åˆ›å»ºESLinté…ç½®æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\.eslintrc.cjs
          
content: module.exports = {
  root: true,
  env: { browser: true, es2020: true },
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
  ],
  ignorePatterns: ['dist', '.eslintrc.cjs'],
  parser: '@typescript-eslint/parser',
  plugins: ['react-refresh'],
  rules: {
    'react-refresh/only-export-components': [
      'warn',
      { allowConstantExport: true },
    ],
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/no-explicit-any': 'warn',
    'prefer-const': 'error',
    'no-var': 'error',
  },
}

          
åˆ›å»ºGitå¿½ç•¥æ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\.gitignore
          
content: # Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Build outputs
build/
out/

# Dependencies
node_modules/
.pnp
.pnp.js

# Testing
coverage/
.nyc_output

# Misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

# Cache
.cache/
.parcel-cache/
.next/
.nuxt/
.vuepress/dist

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*

          
åˆ›å»ºé¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼Œæ›´æ–°README.mdæ–‡ä»¶ã€‚
        
            
toolName: write_to_file
            
status: success
          
            
filePath: d:\EmpiricalCalculation\README.md
          
changes: undefined
          
ç°åœ¨å®‰è£…é¡¹ç›®ä¾èµ–ï¼Œå‡†å¤‡å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚
        
            
toolName: run_command
            
status: success
          
command: npm install
          
ä¿®å¤ä¾èµ–ç‰ˆæœ¬å†²çªï¼Œå°†date-fnsé™çº§åˆ°2.xç‰ˆæœ¬ä»¥å…¼å®¹date-fns-tzã€‚
        
            
toolName: edit_file_update
            
status: success
          
            
filePath: d:\EmpiricalCalculation\package.json
          
changes: 
              
newStr:     "date-fns": "^2.30.0",
    "date-fns-tz": "^2.0.0",
              
oldStr:     "date-fns": "^3.0.6",
    "date-fns-tz": "^2.0.0",
            
          
é‡æ–°å®‰è£…ä¾èµ–ï¼Œç°åœ¨ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜å·²è§£å†³ã€‚
        
            
toolName: run_command
            
status: success
          
command: npm install
          
ä¾èµ–å®‰è£…æˆåŠŸï¼Œç°åœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚
        
            
toolName: run_command
            
status: running
          
command: npm run dev
          
å¼€å‘æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œç°åœ¨æ‰“å¼€é¢„è§ˆé¡µé¢ã€‚
        
            
toolName: open_preview
            
status: running
          
é¢„è§ˆ
          
## ğŸ‰ é¡¹ç›®æ„å»ºå®Œæˆï¼

æˆ‘å·²ç»æˆåŠŸæ ¹æ® <mcfile name="README.md" path="d:\EmpiricalCalculation\README.md"></mcfile> ä¸­çš„è¦æ±‚æ„å»ºäº†å®Œæ•´çš„ç»éªŒè®¡ç®—å™¨é¡¹ç›®ã€‚

### ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

**é…ç½®æ–‡ä»¶ï¼š**
- <mcfile name="package.json" path="d:\EmpiricalCalculation\package.json"></mcfile> - é¡¹ç›®ä¾èµ–å’Œè„šæœ¬é…ç½®
- <mcfile name="vite.config.ts" path="d:\EmpiricalCalculation\vite.config.ts"></mcfile> - Vite æ„å»ºå·¥å…·é…ç½®
- <mcfile name="tsconfig.json" path="d:\EmpiricalCalculation\tsconfig.json"></mcfile> - TypeScript ç¼–è¯‘é…ç½®
- <mcfile name="tailwind.config.js" path="d:\EmpiricalCalculation\tailwind.config.js"></mcfile> - Tailwind CSS æ ·å¼é…ç½®
- <mcfile name="postcss.config.js" path="d:\EmpiricalCalculation\postcss.config.js"></mcfile> - PostCSS é…ç½®
- <mcfile name=".eslintrc.cjs" path="d:\EmpiricalCalculation\.eslintrc.cjs"></mcfile> - ESLint ä»£ç è§„èŒƒé…ç½®
- <mcfile name=".gitignore" path="d:\EmpiricalCalculation\.gitignore"></mcfile> - Git å¿½ç•¥æ–‡ä»¶é…ç½®

**æ ¸å¿ƒåº”ç”¨æ–‡ä»¶ï¼š**
- <mcfile name="index.html" path="d:\EmpiricalCalculation\index.html"></mcfile> - ä¸» HTML æ–‡ä»¶
- <mcfile name="main.tsx" path="d:\EmpiricalCalculation\src\main.tsx"></mcfile> - åº”ç”¨å…¥å£æ–‡ä»¶
- <mcfile name="App.tsx" path="d:\EmpiricalCalculation\src\App.tsx"></mcfile> - ä¸»åº”ç”¨ç»„ä»¶
- <mcfile name="globals.css" path="d:\EmpiricalCalculation\src\styles\globals.css"></mcfile> - å…¨å±€æ ·å¼æ–‡ä»¶

**React ç»„ä»¶ï¼š**
- <mcfile name="Calculator.tsx" path="d:\EmpiricalCalculation\src\components\Calculator.tsx"></mcfile> - ä¸»è®¡ç®—å™¨ç»„ä»¶
- <mcfile name="TimeZoneSelector.tsx" path="d:\EmpiricalCalculation\src\components\TimeZoneSelector.tsx"></mcfile> - æ—¶åŒºé€‰æ‹©å™¨ç»„ä»¶
- <mcfile name="ResultDisplay.tsx" path="d:\EmpiricalCalculation\src\components\ResultDisplay.tsx"></mcfile> - ç»“æœæ˜¾ç¤ºç»„ä»¶
- <mcfile name="ThemeToggle.tsx" path="d:\EmpiricalCalculation\src\components\ThemeToggle.tsx"></mcfile> - ä¸»é¢˜åˆ‡æ¢ç»„ä»¶

**å·¥å…·å‡½æ•°ï¼š**
- <mcfile name="timezoneData.ts" path="d:\EmpiricalCalculation\src\utils\timezoneData.ts"></mcfile> - æ—¶åŒºæ•°æ®å’Œé…ç½®
- <mcfile name="timeCalculation.ts" path="d:\EmpiricalCalculation\src\utils\timeCalculation.ts"></mcfile> - æ—¶é—´è®¡ç®—æ ¸å¿ƒé€»è¾‘
- <mcfile name="formatting.ts" path="d:\EmpiricalCalculation\src\utils\formatting.ts"></mcfile> - æ ¼å¼åŒ–å·¥å…·å‡½æ•°

**éƒ¨ç½²é…ç½®ï¼š**
- <mcfile name="deploy.yml" path="d:\EmpiricalCalculation\.github\workflows\deploy.yml"></mcfile> - GitHub Pages è‡ªåŠ¨éƒ¨ç½²é…ç½®
- <mcfile name="vercel.json" path="d:\EmpiricalCalculation\vercel.json"></mcfile> - Vercel éƒ¨ç½²é…ç½®

### âœ¨ å®ç°çš„åŠŸèƒ½ç‰¹æ€§

1. **ğŸ¯ ç²¾ç¡®è®¡ç®—** - æ”¯æŒå¤§æ•°å€¼ç»éªŒè®¡ç®—ï¼Œç²¾ç¡®åˆ°åˆ†é’Ÿçº§åˆ«
2. **ğŸŒ å…¨çƒæ—¶åŒºæ”¯æŒ** - åŒ…å«70+ä¸ªä¸»è¦æ—¶åŒºï¼ŒæŒ‰åœ°åŒºåˆ†ç»„æ˜¾ç¤º
3. **ğŸ“± å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢ç«¯
4. **ğŸŒ™ æ·±è‰²æ¨¡å¼** - æ”¯æŒæµ…è‰²/æ·±è‰²ä¸»é¢˜åˆ‡æ¢ï¼Œè®°ä½ç”¨æˆ·åå¥½
5. **ğŸ’¾ æ•°æ®æŒä¹…åŒ–** - è‡ªåŠ¨ä¿å­˜è¾“å…¥å†å²å’Œè®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨
6. **ğŸ“‹ ä¸€é”®å¤åˆ¶** - æ”¯æŒè®¡ç®—ç»“æœå¤åˆ¶åˆ°å‰ªè´´æ¿
7. **âš¡ å¿«é€Ÿéƒ¨ç½²** - é…ç½®äº†å¤šå¹³å°éƒ¨ç½²æ”¯æŒ

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **React 18 + TypeScript** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Ant Design** - ä¼ä¸šçº§UIç»„ä»¶åº“
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **date-fns + date-fns-tz** - æ—¶åŒºå¤„ç†åº“

### ğŸš€ é¡¹ç›®çŠ¶æ€

âœ… **å¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨** - é¡¹ç›®è¿è¡Œåœ¨ http://localhost:3000/
âœ… **ä¾èµ–å®‰è£…å®Œæˆ** - æ‰€æœ‰å¿…è¦çš„åŒ…éƒ½å·²æ­£ç¡®å®‰è£…
âœ… **é…ç½®æ–‡ä»¶å°±ç»ª** - æ‰€æœ‰æ„å»ºå’Œéƒ¨ç½²é…ç½®éƒ½å·²å®Œæˆ
âœ… **ä»£ç ç»“æ„å®Œæ•´** - æŒ‰ç…§æœ€ä½³å®è·µç»„ç»‡çš„é¡¹ç›®ç»“æ„

### ğŸ“ ä½¿ç”¨è¯´æ˜

1. åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:3000/ æŸ¥çœ‹åº”ç”¨
2. è¾“å…¥å‡çº§æ‰€éœ€ç»éªŒå€¼ã€ç°æœ‰ç»éªŒå€¼å’Œæ¯å°æ—¶è·å–ç»éªŒå€¼
3. é€‰æ‹©æ‚¨æ‰€åœ¨çš„æ—¶åŒº
4. ç‚¹å‡»è®¡ç®—æŒ‰é’®è·å¾—ç²¾ç¡®çš„å‡çº§å®Œæˆæ—¶é—´
5. å¯ä»¥ä¸€é”®å¤åˆ¶ç»“æœï¼Œåˆ‡æ¢æ·±è‰²/æµ…è‰²ä¸»é¢˜

é¡¹ç›®å·²å®Œå…¨æŒ‰ç…§README.mdä¸­çš„è¦æ±‚æ„å»ºå®Œæˆï¼ŒåŒ…å«äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å’ŒæŠ€æœ¯ç‰¹æ€§ï¼
        